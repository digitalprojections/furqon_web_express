function input_title_data(e){var t=indexdb.transaction(["titles"],"readwrite"),n=t.objectStore("titles");e.forEach(function(e){n.put(e)}),t.oncomplete=function(e){console.log("All done!"),get_surah_names()}}function get_surah_names(){try{var e=indexdb.transaction(["titles"]),t=e.objectStore("titles"),n=t.get(1);n.onerror=function(e){},n.onsuccess=function(e){if(e.target.result){var t=indexdb.transaction(["titles"]),n=t.objectStore("titles"),o=[],a=n.openCursor();a.onerror=function(e){console.log(e)},a.onsuccess=function(e){var t=e.target.result;t?(o.push(t.value),t.continue()):(display_surah_names(o),o=[],console.log("displaying titles"))}}else{console.log("requesting titles from server");var s={action:"names_as_objects",language_id:language_id};ajax(s)}}}catch(e){}}var indexdb,databaseName="myDB",databaseVersion=1,openRequest=indexedDB.open(databaseName);openRequest.onerror=function(e){console.log(e.errorCode)},openRequest.onsuccess=function(e){indexdb=e.target.result,console.log("database opened",indexdb)},openRequest.onupgradeneeded=function(e){indexdb=e.target.result,indexdb.onerror=function(){console.log("error loading the database")};var t=indexdb.createObjectStore("titles",{autoIncrement:!0});t.createIndex("chapterId","chapterId",{unique:!1}),t.createIndex("title","title",{unique:!0}),t.createIndex("languageNo","languageNo",{unique:!1}),t.transaction.oncomplete=function(e){console.log("database upgraded successfully!"),get_surah_names()}};