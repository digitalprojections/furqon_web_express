var ayat_db;var ayat_databadeName="ayatDB";var databaseVersion=1;var openRequest=indexedDB.open(ayat_databadeName);openRequest.onerror=function(event){console.log(event.errorCode)};openRequest.onsuccess=function(event){ayat_db=event.target.result;console.log("database opened",ayat_db)};openRequest.onupgradeneeded=function(event){ayat_db=event.target.result;ayat_db.onerror=function(){console.log("error loading the database")};var store=ayat_db.createObjectStore("favorites",{autoIncrement:true});store.createIndex("VerseID","VerseID",{unique:false});store.createIndex("DatabaseID","DatabaseID",{unique:false});store.createIndex("SuraID","SuraID",{unique:false});store.transaction.oncomplete=function(event){console.log("database upgraded successfully!")}};function input_favorite_data(titlenames){var transaction=ayat_db.transaction(["favorites"],"readwrite");var titleStore=transaction.objectStore("favorites");titlenames.forEach(function(i){titleStore.put(i)});transaction.oncomplete=function(event){console.log("Favorites entry done!")}}function get_favorite_ayats(){try{var transaction=ayat_db.transaction(["favorites"]);var objectStore=transaction.objectStore("favorites");var request=objectStore.get(1);request.onerror=function(event){};request.onsuccess=function(event){if(event.target.result){var transaction=ayat_db.transaction(["favorites"]);var objectStore=transaction.objectStore("favorites");var dataset=[];var request=objectStore.openCursor();request.onerror=function(event){console.log(event)};request.onsuccess=function(event){var cursor=event.target.result;if(cursor){dataset.push(cursor.value);cursor.continue()}else{display_favorites(dataset);dataset=[];console.log("displaying favorites")}}}else{}}}catch(e){}}